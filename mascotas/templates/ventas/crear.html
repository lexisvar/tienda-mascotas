<!doctype html>
<html lang="es">
  
  {% include 'partials/head.html' %} <!--head-->

  <body> 

    {# Cargamos la librer√≠a #}
    {% load bootstrap4 %}

    {# Widget Tweaks #}
    {% load widget_tweaks %}

    <header>
      {% include 'partials/nav.html' %} <!--nav -->
    </header>    

    <main role="main">

        <div class="container text-center mt-5">

          <div class="row mb-4">
            <div class="col-md-12">
              <h1 style="font-size: 28px;">Tienda para Mascotas</h1>              
            </div>
          </div>          

          <div class="row mb-5">

             <!--nav -->

            <div class="col-md-10">


                <nav aria-label="breadcrumb mb-3">
        					<ol class="breadcrumb">
        					    <li class="breadcrumb-item"><a href="./">Ventas</a></li>
        					    <li class="breadcrumb-item active">Crear</li>
        					</ol>
        				</nav>
                	<h4>Crear</h4>
                  <div id="vue-app">
                    <div class="row">
                      <div v-if="mostrar_mensaje" class="col alert alert-primary" role="alert">
                        [[mensaje]]
                      </div>
                    </div>
                    <div class="row">
                      
                      <h4>Productos</h4>
                      <div class="col-8">
                        <v-select v-model="product_selected" :options="list_product" label="nombre" ></v-select>
                      </div>
                      <div class="col-2">
                        <input type="number" class="form-control" name="cantidad[]" placeholder="Cantidad">
                      </div>
                      <div class="col">
                        <div class="icon-big text-center">
                          <i class="teal fas fa-plus" role="button" @click="agregarProductos"></i>
                        </div>
                      </div>                      
                    </div>
                    <div class="row">                      
                    </div> 
                  </div>
            </div>
          </div>



          <hr>
        </div>

    </main>


    <footer class="text-muted mt-3 mb-3">
        <div align="center">
          Desarrollado por <a href="https://lexisvar.me" target="_blank">Alexis Vargas</a>
      </div> 
    </footer>

      {# JS y jQuery Bootstrap #}
      {% bootstrap_javascript jquery='full' %} 

   
    <script>
      Vue.component('v-select', VueSelect.VueSelect)
      var app = new Vue({
        delimiters: ["[[", "]]"],
        el: '#vue-app',
        data: {
          mostrar_mensaje : false,
          mensaje: 'Hello Vue!',
          text : '',
          list_product: [
            {
              id:1,
              nombre:"Alexis",
            }
          ],
          product_selected : {},
          cantidad_producto : null,
          productos_selected : []
        },
        created(){
          this.productos()
        },
        watch:{
          text(val){
            console.log(val)
          }
        },
        methods:{
          async productos(){
              params = {
                search : "",
              }
              axios
                .get('/productos/buscar', {params})
                .then(response => {
                  if(response.status == 200){
                    this.list_product = response.data.productos
                  }
                })
                .catch(error => {
                  console.log(error);
                });
          },
          agregarProductos(){
            if(this.product_selected){

            }else{
              this.mostrarMsg("debe tener selecionado")
              return false
            }
            console.log(this.product_selected)
          },
          mostrarMsg(mensaje){
            this.mensaje = mensaje

            this.mostrar_mensaje = true
            setTimeout(() => this.mostrar_mensaje = false, 3000);
          }
        }
      })
    </script>
  </body>
</html>
